<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>우선순위 큐에서 임의의 요소 삭제하기</title>
      <link href="pq-delete-element/"/>
      <url>pq-delete-element/</url>
      
        <content type="html"><![CDATA[<h1 id="개요"><a href="#개요" class="headerlink" title="개요"></a>개요</h1><p>우선순위 큐는 보통 힙 자료구조를 사용해 구현됩니다.<br>힙은 최댓값 및 최솟값을 빠르게 찾아내기 위한 완전이진트리 기반의 자료구조입니다.</p><p>힙에서는 최댓값 및 최솟값이 top에 위치하게 되며, 이를 참조하는 데에는 상수시간이 걸립니다.<br>하지만 top을 제외한 나머지 요소들은 인터페이스 상 참조할 방법이 없습니다.<br>이때 필요에 의해서 힙에 들어있는 어떤 임의의 요소를 삭제할 상황이 생기면 어떻게 해야할까요?</p><a id="more"></a><h1 id="요소를-삭제하기-위한-노력"><a href="#요소를-삭제하기-위한-노력" class="headerlink" title="요소를 삭제하기 위한 노력"></a>요소를 삭제하기 위한 노력</h1><h2 id="방문-배열-만들기"><a href="#방문-배열-만들기" class="headerlink" title="방문 배열 만들기"></a>방문 배열 만들기</h2><p>우선순위 큐에 요소를 삭제하고 싶으면 방문 배열에 체크를 하는 방법이 있습니다.<br>다음과 같이 말이죠.</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">priority_queue</span>&lt;<span class="keyword">int</span>&gt; PQ;</span><br><span class="line"><span class="keyword">bool</span> visit[<span class="number">100</span>]&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7을 삭제</span></span><br><span class="line">visit[<span class="number">7</span>] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 실질적인 삭제 처리 작업</span></span><br><span class="line"><span class="keyword">if</span> (!PQ.empty() &amp;&amp; visit[PQ.top()]) &#123;</span><br><span class="line">    PQ.pop();</span><br><span class="line">    visit[PQ.top()] = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>흠. 나쁘진 않네요. 하지만 이렇게 하면 중복된 요소를 처리할 수 없습니다.<br>우선순위 큐에 7이 2개 들어있고 둘 다 삭제해야 한다면 써먹을 수 없죠.</p><h2 id="방문-배열-대신-카운팅-배열"><a href="#방문-배열-대신-카운팅-배열" class="headerlink" title="방문 배열 대신 카운팅 배열"></a>방문 배열 대신 카운팅 배열</h2><p>그 문제는 이렇게 해결이 가능합니다.</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">priority_queue</span>&lt;<span class="keyword">int</span>&gt; PQ;</span><br><span class="line"><span class="keyword">int</span> cnt[<span class="number">100</span>]&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7을 2개 삭제</span></span><br><span class="line">cnt[<span class="number">7</span>] = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 실질적인 삭제 처리 작업</span></span><br><span class="line"><span class="keyword">while</span> (!PQ.empty() &amp;&amp; cnt[PQ.top()]) &#123;</span><br><span class="line">    PQ.pop();</span><br><span class="line">    cnt[PQ.top()]--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>true/false가 아닌 그 개수를 카운팅하는 것이죠. 1번에서 언급한 한계는 해결됐네요.<br>하지만 아직 치명적인 문제점이 있습니다.<br>우선순위 큐에 들어올 요소의 범위가 int로 표현되는 모든 범위라면 어떻게 할까요?</p><h2 id="카운팅-해쉬-테이블"><a href="#카운팅-해쉬-테이블" class="headerlink" title="카운팅 해쉬 테이블"></a>카운팅 해쉬 테이블</h2><p>unordered_map을 사용하면 그 부분도 해결이 됩니다.</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">priority_queue</span>&lt;<span class="keyword">int</span>&gt; PQ;</span><br><span class="line"><span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; cnt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2147483647을 삭제</span></span><br><span class="line">cnt[<span class="number">2147483647</span>]++;</span><br></pre></td></tr></table></figure><p>이제 int 범위 어떤 범위가 들어오더라도 삭제 처리를 할 수 있게 되었습니다.<br>하지만 unordered_map은 해쉬충돌이 자주 일어나면 상당히 느리게 동작한다는 단점이 있습니다.<br>혹시 더 좋은 방법도 있을까요?</p><h2 id="새로운-우선순위-큐"><a href="#새로운-우선순위-큐" class="headerlink" title="새로운 우선순위 큐"></a>새로운 우선순위 큐</h2><p>삭제를 담당할 우선순위 큐를 사용하는 방법이 있습니다.</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">priority_queue</span>&lt;<span class="keyword">int</span>&gt; PQ, delPQ;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2147483647을 삭제</span></span><br><span class="line">delPQ.push(<span class="number">2147483647</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 실질적인 삭제 처리 작업</span></span><br><span class="line"><span class="keyword">while</span> (!PQ.empty() &amp;&amp; !delPQ.empty() &amp;&amp; PQ.top() == delPQ.top()) &#123;</span><br><span class="line">    PQ.pop();</span><br><span class="line">    delPQ.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>delPQ.top()이 PQ.top()보다 작으면 현재 PQ.top()은 삭제되지 않은 요소이므로 무시하면 되고, 같다면 삭제해야 하는 요소이므로 삭제해주면 됩니다.</p><h2 id="한-걸음-더"><a href="#한-걸음-더" class="headerlink" title="한 걸음 더!"></a>한 걸음 더!</h2><p>PQ에 들어있지 않은데 실수로, 혹은 상황에 의해 어쩔 수 없이 존재하지도 않은 요소를 삭제하게 되어 delPQ에 넣었다면 그건 어떻게 처리해야 할까요?</p><p>다음과 같이 바꿔주면 됩니다.</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 실질적인 삭제 처리 작업</span></span><br><span class="line"><span class="keyword">while</span> (!PQ.empty() &amp;&amp; !delPQ.empty() &amp;&amp; PQ.top() &lt;= delPQ.top()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (PQ.top() == delPQ.top()) PQ.pop();</span><br><span class="line">    delPQ.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>만약 delPQ.top()이 PQ.top()보다 크다면 그것은 잘못 들어간 요소일 테니 그냥 지워주면 됩니다. PQ.top()보다 작다면 딱히 신경쓰지 않아도 되므로 무시하면 됩니다.</p>]]></content>
      
      
      <categories>
          
          <category> tip </category>
          
      </categories>
      
      
        <tags>
            
            <tag> trick </tag>
            
            <tag> priority queue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>마이너스로 비교기준 바꾸기</title>
      <link href="minus-trick/"/>
      <url>minus-trick/</url>
      
        <content type="html"><![CDATA[<h1 id="개요"><a href="#개요" class="headerlink" title="개요"></a>개요</h1><p>C++에서 priority_queue를 이용해 값을 넣으면 기본적으로 가장 큰 값이 top으로 올라옵니다.<br>만약 가장 작은 값이 top으로 오게 하고 싶으면 functional 헤더의 greater를 사용하면 됩니다.<br>사용법은 다음과 같습니다.</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">priority_queue</span>&lt;<span class="keyword">int</span>&gt; maxPQ;</span><br><span class="line"><span class="built_in">priority_queue</span>&lt;<span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;, greater&lt;<span class="keyword">int</span>&gt;&gt; minPQ;</span><br></pre></td></tr></table></figure><p>겨우 작은 값이 올라오도록 원했을 뿐인데 vector에 greater에 여러가지를 써야합니다.<br>이보다 더 간단한 방법은 없을까요?</p><a id="more"></a><h1 id="마이너스를-쓰자"><a href="#마이너스를-쓰자" class="headerlink" title="마이너스를 쓰자"></a>마이너스를 쓰자</h1><p>우선순위 큐에 넣을 때 마이너스를 붙여서 부호를 바꿔주면 무슨 일이 생길지 생각해봅시다.<br>가장 큰 수는 가장 작은 수가 될 것이고, 반대로 가장 작은 수는 가장 큰 수가 되겠죠?<br>꺼내서 쓸 때는 다시 마이너스를 붙여서 원래 부호로 만들어주면 됩니다.</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">priority_queue</span>&lt;<span class="keyword">int</span>&gt; PQ;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i : &#123; <span class="number">-3</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">9</span>, <span class="number">-13</span>, <span class="number">6</span>, <span class="number">17</span> &#125;) PQ.push(-i);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (; !PQ.empty(); PQ.pop()) <span class="built_in">cout</span> &lt;&lt; -PQ.top() &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>위 코드를 실행한 출력은 다음과 같습니다.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-13 -3 1 5 6 9 17 </span><br></pre></td></tr></table></figure><h1 id="한계"><a href="#한계" class="headerlink" title="한계"></a>한계</h1><p>좋은 테크닉이지만, 마이너스를 쓰는 방법도 한계가 존재합니다.</p><p>int의 범위는 4바이트일 경우 -2147483648부터 2147483647까지입니다. 만약 -2147483648을 우선순위 큐에 넣을 때 음수를 붙이는 순간 signed integer overflow가 발생합니다. 이는 <strong>Undefined Behavior</strong>에 해당하는 매우 위험한 코드가 되죠.</p><p>우리는 결국 greater를 쓸 수밖에 없나요?</p><h1 id="해결책"><a href="#해결책" class="headerlink" title="해결책"></a>해결책</h1><p>잘 생각해보면 -2147483648은 가장 작은 수이므로 가장 큰 수인 2147483647로 변환되면 문제가 없습니다. 그렇다면 두 번째로 작은 수인 -2147483647은 2147483646로 변환되어야 합니다.</p><p>따라서, 우리는 마이너스 대신 bitwise-not 연산자를 붙이면 깔끔하게 해결됩니다.</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">priority_queue</span>&lt;<span class="keyword">int</span>&gt; PQ;</span><br><span class="line">  <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; ++i) vec.push_back(rand() % <span class="number">201</span> - <span class="number">100</span>);</span><br><span class="line">  vec.push_back(<span class="number">2147483647</span>);</span><br><span class="line">  vec.push_back(<span class="number">-2147483648</span>);</span><br><span class="line"></span><br><span class="line">  random_shuffle(vec.begin(), vec.end());</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i : vec) <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i : vec) PQ.push(~i);</span><br><span class="line">  <span class="keyword">for</span> (; !PQ.empty(); PQ.pop()) <span class="built_in">cout</span> &lt;&lt; ~PQ.top() &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>위 코드를 실행한 출력은 다음과 같습니다.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">55 -3 -2147483648 84 -81 0 2147483647 -33 29 5 47 </span><br><span class="line">-2147483648 -81 -33 -3 0 5 29 47 55 84 2147483647 </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> tip </category>
          
      </categories>
      
      
        <tags>
            
            <tag> trick </tag>
            
            <tag> bit masking </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>파일 속 문자열 검색</title>
      <link href="find-string-in-file/"/>
      <url>find-string-in-file/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -r [문자열] [파일들]</span><br></pre></td></tr></table></figure><ul><li><p>현재 폴더에 있는 test 파일 내부에서 &quot;apple&quot; 문자열 찾기</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -r <span class="string">&#x27;apple&#x27;</span> ./<span class="built_in">test</span></span><br></pre></td></tr></table></figure></li><li><p>home 폴더부터 하위 모든 파일 내부에서 &quot;apple&quot; 문자열 찾기</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -r <span class="string">&#x27;apple&#x27;</span> ~/*</span><br></pre></td></tr></table></figure></li><li><p>home 폴더부터 하위 모든 파일 중 .txt 파일 내부에서만 &quot;apple&quot; 문자열 찾기</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -r <span class="string">&#x27;apple&#x27;</span> ~/* --include *.txt</span><br></pre></td></tr></table></figure></li></ul><h1 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h1><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">FINDSTR</span> /M [문자열] *.*</span><br></pre></td></tr></table></figure><ul><li><p>현재 폴더에 있는 모든 파일 내부에서 &quot;banana&quot; 문자열이 들어있는 파일명 찾기</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">FINDSTR</span> /M &#x27;banana&#x27; *.*</span><br></pre></td></tr></table></figure></li><li><p>현재 폴더와 하위 폴더에 있는 .txt 파일 내부에서 &quot;banana&quot; 문자열이 들어있는 파일명 찾기</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">FINDSTR</span> /S /M &#x27;banana&#x27; *.txt</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> command </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="hello-world/"/>
      <url>hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
